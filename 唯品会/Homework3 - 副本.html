<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="Access-Control-Allow-Origin" content="*">
    <title>注册</title>
    <link rel="stylesheet" type="text/css" href="css/frontindex.css">
    <script type="text/javascript" src="jquery-3.3.1.min.js"></script>
    <script type="text/javascript">
        var code;
        $(function () {

            //创建验证码
            createCode();
            $("#inputCode").blur(function () {
               checkCode();
            })
            $("#imgCode").click(function () {
                createCode();
            })
            $("#username").keyup(function(){
                var username=$("#username").val();
                var s =/^[a-zA-Z]\w{5,17}$/;
                var s=s.test(username);
                if (s) {
                     $("#usernameNotice").html("");
                }else{
                     $("#usernameNotice").html("以字母开头，长度6~18，只能包含字符、数字和下划线").css("color","red");
                }
            })
            $("#password").keyup(function(){
                var username=$("#password").val();
                var s =/^[a-zA-Z]\w{5,17}$/;
                var t=s.test(username);
                if (t) {
                     $("#passwordNotice").html("");
                }else{
                     $("#passwordNotice").html("以字母开头，长度6~18，只能包含字符、数字和下划线").css("color","red");
                }
            })
            $("#repeatPassword").keyup(function(){
                var password=$("#password").val();
                var repeatPassword=$("#repeatPassword").val();
                if (password!=repeatPassword) {
                    $("#repeatPasswordNotice").html("两次密码不一致");
                }else{
                     $("#repeatPasswordNotice").html("");
                }
            })
            $("#email").keyup(function(){
               
                var repeatPassword=$("#email").val();
                var s =/^[A-Za-z0-9._%-]+@([A-Za-z0-9-]+\.)+[A-Za-z]{2,4}$/;
                var t=s.test(repeatPassword);
                if (t) {
                    $("#emailNotice").html("");
                }else{
                     $("#emailNotice").html("邮件格式不对");
                }
            })
            //phoneNotice
            $("#phone").keyup(function(){
               
                var repeatPassword=$("#phone").val();
                var s=/^(13[0-9]|14[5|7]|15[0|1|2|3|5|6|7|8|9]|18[0|1|2|3|5|6|7|8|9])\d{8}$/ 

                var t=s.test(repeatPassword);
                if (t) {
                    $("#phoneNotice").html("");
                }else{
                     $("#phoneNotice").html("电话式不对");
                }
            })
           
            $("#ok").click(function () {
                //如果有错误提示，不能注册
                var flag = true;
                $.each($(".notice"),function () {
                    if($(this).html()!="" || $(this).parent().find("input").val()==''){
                        flag = false;
                    }
                })
                if(flag){
                    var username=$("#username").val();
                    var password=$("#password").val();
                    var email=$("#email").val();
                    var name=$("#name").val();
                    var phone=$("#phone").val();
                    var addr=$("#addr").val();
                    $.ajax({
                        type:"GET",//请求方式:GET
                        url: "http://47.100.205.249/jqueryProject/UserInsert",//请求url
                        data:{username:username,password:password,email:email,name:name,phone:phone,addr:addr},//请求参数
                        dataType:"jsonp",//数据类型：jsonp
                        jsonp: "jsonpCallback",
                        jsonpCallback: "success_jsonpCallback",
                        success:function(data){
                             // 请求成功 data是json格式
                             
                            location.href="index.html";
                        }
                    })   
                        
                }else{
                    alert("请完善您的信息");
                }
                
               
            })
          
        })

        function createCode()  {
            code = "";
            var codeLength = 6; //验证码的长度
            var imgCode = $("#imgCode");
            var codeChars = new Array(0, 1, 2, 3, 4, 5, 6, 7, 8, 9,
                'a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z',
                'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z'); //所有候选组成验证码的字符，当然也可以用中文的
            for (var i = 0; i < codeLength; i++) {
                var charNum = Math.floor(Math.random() * 52);
                code += codeChars[charNum];
            }
            imgCode.html(code);
        }
        function checkCode() {
            var inputCode = $("#inputCode").val();
            if (!inputCode) {
                $("#codeNotice").html("请输入验证码").css("color","red");
                createCode();
            } else if (inputCode.toUpperCase() != code.toUpperCase()) {
                $("#codeNotice").html("验证码输入有误").css("color","red");
                createCode();
            } else {
                $("#codeNotice").html("")
            }
        }

                
            
    </script>
</head>
<body>
    <!-- top 开始 -->

    <!-- 右侧列表 -->
    <div class="big_right">
        <div class="right_gouwu">
        </div>
        <div class="right_d1"><a href="#">¤</a>
            <div class="d1_erji1">
                <h2>我的资产</h2>
            </div>
        </div>
        <div class="right_d2">
            <a href="#">♡</a>
            <div class="d1_erji1">
                <h2>我的收藏</h2>
            </div>
        </div>
        <div class="right_d3">
            <a href="#">☺</a>
            <div class="d1_erji1">
                <h2>我喜欢的</h2>
            </div>
        </div>
        <div class="right_d4">
            <a href="#">۞</a>
            <div class="d1_erji1">
                <h2>我要充值</h2>
            </div>
        </div>
        <div class="right_d5">
            <a href="#">✉</a>
            <div class="d1_erji1">
                <h2>用户反馈</h2>
            </div>
        </div>
        <div class="right_d6">
            <a href="#">㊤</a>
            <div class="d1_erji1">
                <h2>返回顶部</h2>
            </div>
        </div>
    </div>
    <header>

        <div class="weizhi" id="wenzi">
            请您登录
            <div class="shou">☟</div>
            <div class="erji1">
                <div class="erji1_tu">
                    <img src="images/front/20.jpg">
                </div>
                <div class="hai">hai!@我是唯品会
                </div>
                <form action="">
                    <input type="text" class="i1" name="username" placeholder="请输入您的账号">
                    <input type="text" class="i3" name="password" placeholder="请输入您的密码">
                    <input type="submit"
                           class="i2" name="" value="登录">
                </form>
            </div>
        </div>
        <!-- 导航 -->
        <div class="daohang">
            <ul>
                <li class="l1"><a href="#" id="register">注册&nbsp;&nbsp;/</a></li>
                <li class="l2"><a href="#"><img src="images/front/gift.gif"> 签到有礼</a>
                    <div class="erji2">
                        <div class="erji2_1">
                            <img src="images/front/days.png">
                        </div>

                        <div class="qiandao">
                            <a href="#">
                                每天签到送惊喜，连续签到更享优惠礼品
                            </a>
                        </div>
                        <form>
                            <input type="submit" name="" value="签到">
                        </form>
                    </div>
                </li>
                <li class="l3"><a href="#">我的订单&nbsp;&nbsp; /</a></li>
                <li class="l4"><a href="#">我的特卖▼</a>
                    <div class="erji3">
                        <div class="erji3_div1">
                            <a href="#">品牌收藏(0)</a></div>
                        <div class="erji3_div2"><a href="#">商品收藏(0)</a></div>
                        <div class="erji3_div3"><a href="#">我的足迹(0)</a></div>

                    </div>
                </li>
                <li class="l5"><a href="#">会员俱乐部▼</a>
                    <div class="erji4">
                        <div class="erji4_div1">
                            <a href="#">俱乐部首页</a></div>
                        <div class="erji4_div2"><a href="#">唯品会兑换</a></div>
                        <div class="erji4_div3"><a href="#">免费抽大奖</a></div>
                    </div>
                </li>
                <li class="l6"><a href="#">客户服务&nbsp;&nbsp;▼</a>
                    <div class="erji5">
                        <div class="erji5_div1">
                            <a href="#">联系客服</a></div>
                        <div class="erji5_div2"><a href="#">帮助中心</a></div>
                        <div class="erji5_div3"><a href="#">服务中心</a></div>
                        <div class="erji5_div4"><a href="#">知识产权</a></div>
                    </div>
                </li>
                <li class="l7"><a href="#">手机版&nbsp;&nbsp;&nbsp;&nbsp;<span> ☎</span></a>
                    <div class="erji6">
                        <img src="images/front/ercode.jpg">
                    </div>
                </li>
                <li class="l8"><a href="#">更多&nbsp;&nbsp;▼
                    <div class="erji7">
                        <h2>合作专区</h2>
                        <div class="erji7_div1"><a href="#">联名卡申请</a></div>
                        <div class="erji7_div1"><a href="#">唯品卡</a></div>
                        <div class="erji7_div1"><a href="#">支付专区</a></div>
                        <hr>
                        <h3>关于我们</h3>
                        <div class="erji7_div1"><a href="#">联名卡申请</a></div>
                        <div class="erji7_div1"><a href="#">唯品卡</a></div>
                        <div class="erji7_div1"><a href="#">支付专区</a></div>
                    </div>
                </a></li>
            </ul>
        </div>
    </header>
    <section>
        <div classs="section_header">
            <div class="header_div1">
                <img src="images/front/3.png">
            </div>
            <div class="header_div2">
                <img src="images/front/2.png" class="c-service-img">
            </div>
            <!-- 搜索框 -->
            <div class="c-search-form">
                <input class="c-search-input "  placeholder="大家都在搜：瑞士双肩包"   type="text">
                <a class="c-search-button" href="###">
                    <span class="c-search-icon"></span>
                </a>
            </div>
            <!-- 购物袋 -->
            <div  class="head-cart">
                <a href="jsp/front/shopcart.jsp ">
                    <span class="ico-bag"></span>
                    <span class="mycarttext-default">购物袋</span>
                    <span class="productItems">0</span>
                </a>
            </div>
        </div>
        <!-- 分类 -->
        <div class="section_headerder">
            <ul>
                <li><a href="<%=path%>/IndexAction">首页</a></li>
                <li><a href="#">女装</a></li>
                <li><a href="#">母婴</a></li>
                <li><a href="#">美妆</a></li>
                <li><a href="#">国际</a></li>
                <li><a href="#">男装</a></li>
                <li><a href="#">居家</a></li>
                <li><a href="#">鞋包</a></li>
                <li><a href="#">运动</a></li>
            </ul>
        </div>

    </section>

    <!-- top结束 -->

    <!-- 注册 -->
    <div class="register">
        <div class="form">
            <div class="title">会员注册</div>
            <hr/>
            <div class="content">
                <span><label>*</label>用户名:</span>
                <input type="text" name="" id="username"><div class="notice" id="usernameNotice"></div>
            </div>
            <div class="content">
                <span><label>*</label>密码:</span>
                <input type="password" name="" id="password"><div class="notice" id="passwordNotice"></div>
            </div>
            <div class="content">
                <span><label>*</label>确认密码:</span>
                <input type="password" name="" id="repeatPassword"><div class="notice" id="repeatPasswordNotice"></div>
            </div>
            <div class="content">
                <span><label>*</label>E-mail:</span>
                <input type="text" name="" id="email"><div class="notice" id="emailNotice"></div>
            </div>
            <div class="content">
                <span>姓名:</span>
                <input type="text" name="" id="name">
            </div>
            <div class="content">
                <span>电话:</span>
                <input type="text" name="" id="phone"><div class="notice" id="phoneNotice"></div>
            </div>
            <div class="content">
                <span>地址:</span>
                <input type="text" name="" id="addr">
            </div>
            <div class="content">
                <span><label>*</label>验证码:</span>
                <input type="text" name="" style="width: 120px" id="inputCode"><span class="code" id="imgCode"></span>
                <div class="notice" id="codeNotice"></div>
            </div>
            <button id="ok">立即注册</button>
        </div>
    </div>

</body>
</html>
